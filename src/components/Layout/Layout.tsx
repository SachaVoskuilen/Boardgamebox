import { Box, Flex, Grid, defaultBreakingPoints } from '@/styles';
import Head from 'next/head';
import { FC, useEffect, useRef, useState } from 'react';
import { StyledLayout, windowSizeType } from '.';
import { Navigation } from '../Navigation';

type Props = {
  title?: string;
  children: JSX.Element | JSX.Element[];
  loading: boolean;
};

export const Layout: FC<Props> = ({ title, children, loading }) => {
  let [menu, setMenu] = useState<string>('default');

  const [windowSize, setWindowSize] = useState<windowSizeType>({ height: 100, width: 100 });

  useEffect(() => {
    // On mount
    setWindowSize({ height: window.innerHeight, width: window.innerWidth });

    // Watch
    const handleWindowResize = () => {
      setWindowSize({ height: window.innerHeight, width: window.innerWidth });
    };
    window.addEventListener('resize', handleWindowResize);
    return () => {
      window.removeEventListener('resize', handleWindowResize);
    };
  }, []);

  return (
    <>
      <Head>
        <title>{title}</title>
        <meta name="description" content="Generated by create-t3-app" />
        <link rel="icon" href="/favicon.ico" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossOrigin="" />
        <link
          rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;800&display=swap"
        />
      </Head>
      <main>
        {windowSize.width >= defaultBreakingPoints.laptop ? (
          <StyledLayout windowSize={windowSize} variant={menu}>
            <Grid gridArea={'navigation'} backgroundColor={'yellow'}>
              <button
                onClick={() => (menu == 'default' ? setMenu('hamburger') : setMenu('default'))}
                style={{ maxWidth: '500px' }}
              >
                change
              </button>
            </Grid>
            {menu != 'default' && (
              <Grid gridArea={'hamburger'} backgroundColor={'lightblue'}>
                <div>hamburger</div>
                <div>Content</div>
              </Grid>
            )}
            <Grid gridArea={'content'} backgroundColor={'green'}>
              <div>computer</div>
              <div>{children}</div>
            </Grid>
          </StyledLayout>
        ) : (
          <StyledLayout windowSize={windowSize} variant={menu}>
            <Grid gridArea={'navigation'} backgroundColor={'yellow'}>
              <button
                onClick={() => (menu == 'default' ? setMenu('hamburger') : setMenu('default'))}
                style={{ maxWidth: '500px' }}
              >
                change
              </button>
            </Grid>
            {menu != 'default' ? (
              <Grid gridArea={'hamburger'} backgroundColor={'lightblue'}>
                <div>hamburger</div>
                <div>Content</div>
              </Grid>
            ) : (
              <Grid gridArea={'content'}>
                <div>mobile</div>
                <div>{children}</div>
              </Grid>
            )}
          </StyledLayout>
        )}
      </main>
    </>
  );
};
